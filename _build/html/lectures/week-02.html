
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>W2 problem &#8212; UCSD CSS 1</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">UCSD CSS 1</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Welcome to CSS 2
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course (CSS 2 summer 2)
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../course/syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../course/expectations.html">
   Expectations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../course/datahub.html">
   Datahub assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../course/debugging.html">
   Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../course/resources.html">
   Extracurricular Resources
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="P01.html">
   P01: Review of Python and Notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P02.html">
   P02: Data representation: numpy and pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P03.html">
   P03: Plotting with matplotlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P04.html">
   P04: Data cleaning and management
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P05.html">
   P05: Modeling Data 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P06.html">
   P06: Modeling Data 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P07.html">
   P07: Classification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P08.html">
   P08: Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P09.html">
   P09: Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P10.html">
   P10: Dimensionality reduction
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/lectures/week-02.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UCSD-CSS-001/ucsd-css-001.github.io"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UCSD-CSS-001/ucsd-css-001.github.io/issues/new?title=Issue%20on%20page%20%2Flectures/week-02.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pseudo-algorithm">
   Pseudo-algorithm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#very-high-level">
     Very high level
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-detail">
     More detail
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#files">
     Files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#representing-counters">
     Representing Counters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#words">
     Words
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-counters">
     Comparing counters
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="w2-problem">
<h1>W2 problem<a class="headerlink" href="#w2-problem" title="Permalink to this headline">¶</a></h1>
<p>This week our ultimate goal is to take two books from <a class="reference external" href="https://www.gutenberg.org/">project gutenberg</a>: <a class="reference external" href="https://www.gutenberg.org/ebooks/11">Alice in Wonderland</a>, and <a class="reference external" href="https://www.gutenberg.org/ebooks/84">Frankenstein</a>, and figure out which words are disproportionately common in each book.  This kind of analysis is the first step to generating meaningful <a class="reference external" href="https://en.wikipedia.org/wiki/Tag_cloud">word clouds</a> from text, and it underlies the family of <a class="reference external" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">term frequency - inverse document frequency</a> methods commonly used for text search, user modeling, etc.</p>
<div class="section" id="pseudo-algorithm">
<h2>Pseudo-algorithm<a class="headerlink" href="#pseudo-algorithm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="very-high-level">
<h3>Very high level<a class="headerlink" href="#very-high-level" title="Permalink to this headline">¶</a></h3>
<p>The gist of what we want to do is:</p>
<ul class="simple">
<li><p>read in text of books</p></li>
<li><p>count how often each word occurred in each book</p></li>
<li><p>for each word, figure out if it occurred more often in one book than the other.</p></li>
</ul>
<p>This is very high level, and we need to specify the details of how we accomplish this.</p>
</div>
<div class="section" id="more-detail">
<h3>More detail<a class="headerlink" href="#more-detail" title="Permalink to this headline">¶</a></h3>
<p>I. For each book:<br />
1. read in book text<br />
2. separate text into words<br />
3. Loop through all the words.<br />
a. if word is new: initialize its counter at 1.<br />
b. if word is old: increment its counter by 1.</p>
<p>II. For each word:<br />
1. compare counters for that word from the two books.</p>
<p>This is getting better, but we are missing some key details of what exactly we want to do:</p>
<ul class="simple">
<li><p>how do we read in files?</p></li>
<li><p>what are words?  how do we figure out if they are new or old?</p></li>
<li><p>how do we represent counters for each word?</p></li>
<li><p>how do we compare counters?</p></li>
</ul>
</div>
<div class="section" id="files">
<h3>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<p>How do we read in files?  We will cover that this week, looking at how to use the <code class="docutils literal notranslate"><span class="pre">open()</span></code> command to read in simple text files.</p>
</div>
<div class="section" id="representing-counters">
<h3>Representing Counters<a class="headerlink" href="#representing-counters" title="Permalink to this headline">¶</a></h3>
<p>We will learn how to use the <em>dictionary</em> data structure to keep track of different counters for different words.</p>
</div>
<div class="section" id="words">
<h3>Words<a class="headerlink" href="#words" title="Permalink to this headline">¶</a></h3>
<p>The computer will read in a large block of text as a single string.  How do we tell a computer what a “word” is?  How do we figure out which words are the same?  We will learn to work with <em>strings</em> to try to get words out, but we also have to define, conceptually, what we mean by a word!</p>
<p>Here is a sentence from Frankenstein:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>There—for with your leave, my sister, I will put some trust in preceding 
navigators—there snow and frost are banished; and, sailing over a calm sea, we may 
be wafted to a land surpassing in wonders and in beauty every region hitherto 
discovered on the habitable globe.
</pre></div>
</div>
<p>How do we decide what a word is? And which words are the same?
The simplest thing to do is say that spaces divide strings into words and two words are the same if their strings are the same.
So the above text ought to be divided into words accordingly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>There—for
with
your
leave,
...
navigators—there
...
and
banished;
and, 
...
globe.
</pre></div>
</div>
<p>Note a few undesirable outcomes:</p>
<ul class="simple">
<li><p>non alphabetic characters are included as part of a word (e.g., ‘and’ and ‘and,’ are different)</p></li>
<li><p>non space word breaks are disregarded (e.g., ‘navigators-there’ is one word)</p></li>
<li><p>words have varying capitalization (so ‘There’ and ‘there’ are different strings)</p></li>
</ul>
<p>So we might modify our procedure to say that we (1) convert all letters to lower case, (2) replace all non-letter characters with spaces, then (3) use spaces to split the string into words:</p>
<p>converting to lower case and replacing non-letter characters yields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">there</span> <span class="k">for</span> <span class="k">with</span> <span class="n">your</span> <span class="n">leave</span>  <span class="n">my</span> <span class="n">sister</span>  <span class="n">I</span> <span class="n">will</span> <span class="n">put</span> <span class="n">some</span> <span class="n">trust</span> <span class="ow">in</span> <span class="n">preceding</span> 
<span class="n">navigators</span> <span class="n">there</span> <span class="n">snow</span> <span class="ow">and</span> <span class="n">frost</span> <span class="n">are</span> <span class="n">banished</span>  <span class="ow">and</span>  <span class="n">sailing</span> <span class="n">over</span> <span class="n">a</span> <span class="n">calm</span> <span class="n">sea</span>  <span class="n">we</span> <span class="n">may</span> 
<span class="n">be</span> <span class="n">wafted</span> <span class="n">to</span> <span class="n">a</span> <span class="n">land</span> <span class="n">surpassing</span> <span class="ow">in</span> <span class="n">wonders</span> <span class="ow">and</span> <span class="ow">in</span> <span class="n">beauty</span> <span class="n">every</span> <span class="n">region</span> <span class="n">hitherto</span> 
<span class="n">discovered</span> <span class="n">on</span> <span class="n">the</span> <span class="n">habitable</span> <span class="n">globe</span> 
</pre></div>
</div>
<p>Which yields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yhere</span> 
<span class="k">for</span> 
<span class="k">with</span> 
<span class="n">your</span> 
<span class="n">leave</span>
<span class="o">...</span>
<span class="n">navigators</span>
<span class="n">there</span>
<span class="o">...</span>
<span class="o">...</span>
<span class="ow">and</span>
<span class="n">banished</span>

<span class="ow">and</span>

<span class="o">...</span>
<span class="n">globe</span>
</pre></div>
</div>
<p>This looks much better.  We appear to have some words with no letters, because we had two spaces in a row, but we can deal with that.</p>
</div>
<div class="section" id="comparing-counters">
<h3>Comparing counters<a class="headerlink" href="#comparing-counters" title="Permalink to this headline">¶</a></h3>
<p>We said we will learn how to use <em>dictionaries</em> to store counters for different words.  But how do we compare counters between books?</p>
<p>For instance, Alice in wonderland and Frankenstein have the following counts for a few selected words.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Word</p></th>
<th class="head"><p>Alice in Wonderland</p></th>
<th class="head"><p>Frankenstein</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>the</p></td>
<td><p>1815</p></td>
<td><p>4366</p></td>
</tr>
<tr class="row-odd"><td><p>and</p></td>
<td><p>911</p></td>
<td><p>3035</p></td>
</tr>
<tr class="row-even"><td><p>to</p></td>
<td><p>802</p></td>
<td><p>2173</p></td>
</tr>
<tr class="row-odd"><td><p>alice</p></td>
<td><p>385</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>my</p></td>
<td><p>58</p></td>
<td><p>1773</p></td>
</tr>
<tr class="row-odd"><td><p>pie</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>Note that if we just take the difference in counts, we will find that:</p>
<ul class="simple">
<li><p>Frankenstein has more of just about every word (because frankenstein contains 77k words, while alice in wonderland has about 29k)</p></li>
<li><p>differences in counts are larger for more common words: (the occurs 2551 more times in frankenstein than alice in wonderland, while ‘my’ only occurs 1715 times more, even though ‘my’ should be more diagnostic, because frankenstein is written in first person while alice in wonderland is not!)</p></li>
<li><p>ratios of counts cannot be calculated because we often have counts of 0, and we cannot divide by 0.</p></li>
</ul>
<p>To address all of these problems, it is customary to calculate differences in counts by:</p>
<ol class="simple">
<li><p>add 1 to the counter of each word being considered (this is called smoothing, so nothing has a frequency of exactly 0)</p></li>
<li><p>divide the count by the total count, so we have a proportional frequency, rather than an absolute frequency.</p></li>
<li><p>calculate the ratio of these frequencies.</p></li>
<li><p>log10 transform the ratio of these frequencies to make the numbers more legible.</p></li>
</ol>
<p>Using this kind of procedure, we will find that words like ‘elizabeth’, and ‘human’, occur much more often in frankenstein, while words like ‘alice’, and ‘hatter’ occur much more often in alice in wonderland.  Furthmore, we find other disproportionalities, for words like (‘dont’ and ‘im’), and (‘during’ and ‘although’), which reflect different writing styles form different eras.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ed Vul<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>